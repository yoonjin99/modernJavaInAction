# CompletableFuture와 리액티브 프로그래밍 컨셉의 기초
### 스레드와 높은 수준의 추상화
자바 스트림을 사용하면 외부반복 대신 내부반복을 통해 쉽게 병렬성을 달성할 수 있음

sum = Arrays.stream(stats).parallel().sum();

스트림을 이용해 스레드 사용 패턴을 추상화할 수 있다. 쓸모 없는 코드가 라이브러리 내부로 구현되면서 복잡성도 줄어든다.

- 스레드의 문제
  - 자바 스레드는 직접 운영체제 스레드에 접근. 운영체제 스레드는 비용이 비싸며, 스레드 숫자도 제한되어 있음.
  - 기기마다 다른 하드웨어 스레드를 가지며, 주어진 프로그램에서 사용할 최적의 자바 스레드 개수는 사용할 수 있는 하드웨어 코어 개수에 따라 달라짐
- 스레드 풀이 더 좋은 이유
  - 스레드풀을 사용하면 하드웨어에 맞는 수의 태스크를 유지함과 동시에 수 천개의 태스크를 스레드 풀에 아무 오버헤드 없이 제출 가능.
- 스레드 풀이 나쁜 이유
  - k 스레드를 가진 스레드 풀은 오직 k만큼의 스레드를 동시에 실행할 수 있음.
  - sleep 중이거나 I/O block 중인 스레드가 있다면 작업 효율성이 떨어지며, 데드락에 걸릴 수도 있음
  - 모든 스레드 풀이 종료되기 전에 프로그램을 종료하면, 워커 스레드가 다음 태스크 제출을 기다리며 종료되지 않을 수 있으므로 주의해야 함.

### 박스와 채널 모델
- 박스와 채널 모델은 동시성을 설계하고 개념화하기 위한 모델
- 박스와 채널 모델을 이용하면 생각과 코드를 구조화할 수 있으며, 시스템 구현의 추상화 수준을 높일 수 있음
- 박스로 원하는 연산을 표현하면 계산을 손으로 코딩한 결과보다 더 효율적일 것
- 또한 병렬성을 직접 프로그래밍하는 관점을 콤비네이터를 이용해 내부적으로 작업을 처리하는 관점으로 바꿔줌


